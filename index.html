<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Planner</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background-color: #f4f6f4;
            color: #2c2c2c;
            line-height: 1.5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #87a96b;
            padding-bottom: 15px;
        }

        .month-year {
            font-size: 1.8rem;
            font-weight: bold;
            color: #4a5d3a;
            margin-bottom: 5px;
        }

        .week-info {
            font-size: 1rem;
            color: #5d5d5d;
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: #4a5d3a;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .nav-btn:hover {
            background: #5c7047;
        }

        .monthly-btn {
            background: #87a96b;
        }

        .monthly-btn:hover {
            background: #739459;
        }

        .priorities {
            background: white;
            border: 2px solid #87a96b;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .priorities h3 {
            color: #4a5d3a;
            margin-bottom: 15px;
            font-size: 1.1rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }

        .priority-input {
            width: 100%;
            border: none;
            border-bottom: 1px dotted #ccc;
            padding: 8px 0;
            margin-bottom: 10px;
            font-family: inherit;
            font-size: 0.95rem;
            background: transparent;
            outline: none;
        }

        .priority-input:focus {
            border-bottom-color: #87a96b;
            border-bottom-style: solid;
        }

        .priority-input::placeholder {
            color: #aaa;
            font-style: italic;
        }

        .days-container {
            display: grid;
            gap: 20px;
        }

        @media (min-width: 768px) {
            .days-container {
                grid-template-columns: 1fr 1fr;
            }
            
            .weekend {
                grid-column: 1 / -1;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 20px;
            }
        }

        .day {
            background: white;
            border: 2px solid #e8e8e8;
            border-radius: 8px;
            padding: 15px;
            min-height: 200px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }

        .day-name {
            font-weight: bold;
            color: #4a5d3a;
            font-size: 1rem;
        }

        .day-date {
            color: #666;
            font-size: 0.9rem;
        }

        .day-content {
            width: 100%;
            border: none;
            resize: vertical;
            min-height: 150px;
            font-family: inherit;
            font-size: 0.9rem;
            line-height: 1.6;
            outline: none;
            background: transparent;
        }

        .weekend .day {
            min-height: 150px;
        }

        .weekend .day-content {
            min-height: 100px;
        }

        .monthly-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .monthly-calendar {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            position: relative;
        }

        .month-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .month-nav-btn {
            background: #4a5d3a;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .month-nav-btn:hover {
            background: #5c7047;
        }

        .month-nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .calendar-header {
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            color: #4a5d3a;
            margin: 0;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #ddd;
            border: 1px solid #ddd;
        }

        .calendar-day {
            background: white;
            padding: 10px;
            text-align: center;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-day.clickable {
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .calendar-day.clickable:hover {
            background: #e8f0e5;
        }

        .calendar-day.header {
            background: #f0f0f0;
            font-weight: bold;
            font-size: 0.8rem;
            cursor: default;
        }

        .calendar-day.current-week {
            background: #f0f4ed;
        }

        .calendar-day.current-week.clickable:hover {
            background: #e1eadc;
        }

        .save-notice {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1001;
        }

        .save-notice.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="month-year" id="monthYear">January 2025</div>
            <div class="week-info" id="weekInfo">Week of January 13-19, 2025</div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" onclick="previousWeek()">← Previous Week</button>
            <button class="nav-btn monthly-btn" onclick="showMonthly()">Monthly View</button>
            <button class="nav-btn" onclick="nextWeek()">Next Week →</button>
        </div>

        <div class="priorities">
            <h3>Weekly Priorities</h3>
            <input type="text" class="priority-input" placeholder="Priority 1..." id="priority1">
            <input type="text" class="priority-input" placeholder="Priority 2..." id="priority2">
            <input type="text" class="priority-input" placeholder="Priority 3..." id="priority3">
            <input type="text" class="priority-input" placeholder="Priority 4..." id="priority4">
            <input type="text" class="priority-input" placeholder="Priority 5..." id="priority5">
        </div>

        <div class="days-container">
            <div class="day">
                <div class="day-header">
                    <span class="day-name">Monday</span>
                    <span class="day-date" id="mondayDate">Jan 13</span>
                </div>
                <textarea class="day-content" id="monday" placeholder="Your plans, tasks, notes..."></textarea>
            </div>

            <div class="day">
                <div class="day-header">
                    <span class="day-name">Tuesday</span>
                    <span class="day-date" id="tuesdayDate">Jan 14</span>
                </div>
                <textarea class="day-content" id="tuesday" placeholder="Your plans, tasks, notes..."></textarea>
            </div>

            <div class="day">
                <div class="day-header">
                    <span class="day-name">Wednesday</span>
                    <span class="day-date" id="wednesdayDate">Jan 15</span>
                </div>
                <textarea class="day-content" id="wednesday" placeholder="Your plans, tasks, notes..."></textarea>
            </div>

            <div class="day">
                <div class="day-header">
                    <span class="day-name">Thursday</span>
                    <span class="day-date" id="thursdayDate">Jan 16</span>
                </div>
                <textarea class="day-content" id="thursday" placeholder="Your plans, tasks, notes..."></textarea>
            </div>

            <div class="day">
                <div class="day-header">
                    <span class="day-name">Friday</span>
                    <span class="day-date" id="fridayDate">Jan 17</span>
                </div>
                <textarea class="day-content" id="friday" placeholder="Your plans, tasks, notes..."></textarea>
            </div>

            <div class="weekend">
                <div class="day">
                    <div class="day-header">
                        <span class="day-name">Saturday</span>
                        <span class="day-date" id="saturdayDate">Jan 18</span>
                    </div>
                    <textarea class="day-content" id="saturday" placeholder="Weekend plans..."></textarea>
                </div>

                <div class="day">
                    <div class="day-header">
                        <span class="day-name">Sunday</span>
                        <span class="day-date" id="sundayDate">Jan 19</span>
                    </div>
                    <textarea class="day-content" id="sunday" placeholder="Weekend plans..."></textarea>
                </div>
            </div>
        </div>
    </div>

    <div class="monthly-overlay" id="monthlyOverlay">
        <div class="monthly-calendar">
            <button class="close-btn" onclick="hideMonthly()">&times;</button>
            <div class="month-nav">
                <button class="month-nav-btn" id="prevMonthBtn" onclick="previousMonth()">← Previous</button>
                <div class="calendar-header" id="calendarHeader">January 2025</div>
                <button class="month-nav-btn" id="nextMonthBtn" onclick="nextMonth()">Next →</button>
            </div>
            <div class="calendar-grid" id="calendarGrid">
            </div>
        </div>
    </div>

    <div class="save-notice" id="saveNotice">Saved!</div>

    <script>
        let currentWeekStart = new Date(2025, 7, 4); // August 4, 2025 (Monday)
        let plannerData = {};
        let calendarViewMonth = new Date(2025, 7, 1); // August 2025 for calendar view

        function updateWeekDisplay() {
            const weekEnd = new Date(currentWeekStart);
            weekEnd.setDate(weekEnd.getDate() + 6);
            
            const monthYear = currentWeekStart.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            const weekInfo = `Week of ${currentWeekStart.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}-${weekEnd.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}, ${currentWeekStart.getFullYear()}`;
            
            document.getElementById('monthYear').textContent = monthYear;
            document.getElementById('weekInfo').textContent = weekInfo;
            
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            const dayElements = ['mondayDate', 'tuesdayDate', 'wednesdayDate', 'thursdayDate', 'fridayDate', 'saturdayDate', 'sundayDate'];
            
            for (let i = 0; i < 7; i++) {
                const date = new Date(currentWeekStart);
                date.setDate(date.getDate() + i);
                document.getElementById(dayElements[i]).textContent = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            }
            
            loadWeekData();
        }

        function getWeekKey() {
            return currentWeekStart.toISOString().split('T')[0];
        }

        function saveWeekData() {
            const weekKey = getWeekKey();
            const data = {
                priorities: [],
                days: {}
            };
            
            for (let i = 1; i <= 5; i++) {
                data.priorities.push(document.getElementById(`priority${i}`).value);
            }
            
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
            days.forEach(day => {
                data.days[day] = document.getElementById(day).value;
            });
            
            plannerData[weekKey] = data;
            
            // Save to browser storage
            try {
                localStorage.setItem('plannerData', JSON.stringify(plannerData));
            } catch(e) {
                console.log('Storage not available, data will only persist during session');
            }
            
            // Show save notification
            const notice = document.getElementById('saveNotice');
            notice.classList.add('show');
            setTimeout(() => notice.classList.remove('show'), 2000);
        }

        function loadWeekData() {
            const weekKey = getWeekKey();
            const data = plannerData[weekKey];
            
            if (data) {
                for (let i = 1; i <= 5; i++) {
                    document.getElementById(`priority${i}`).value = data.priorities[i-1] || '';
                }
                
                const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
                days.forEach(day => {
                    document.getElementById(day).value = data.days[day] || '';
                });
            } else {
                // Clear all fields for new week
                for (let i = 1; i <= 5; i++) {
                    document.getElementById(`priority${i}`).value = '';
                }
                
                const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
                days.forEach(day => {
                    document.getElementById(day).value = '';
                });
            }
        }

        function previousWeek() {
            saveWeekData();
            currentWeekStart.setDate(currentWeekStart.getDate() - 7);
            
            // Don't go before August 2025
            const minDate = new Date(2025, 7, 4); // August 4, 2025
            if (currentWeekStart < minDate) {
                currentWeekStart = new Date(minDate);
            }
            
            updateWeekDisplay();
        }

        function nextWeek() {
            saveWeekData();
            currentWeekStart.setDate(currentWeekStart.getDate() + 7);
            
            // Don't go past December 2026
            const maxDate = new Date(2026, 11, 28); // December 28, 2026
            if (currentWeekStart > maxDate) {
                currentWeekStart = new Date(maxDate);
            }
            
            updateWeekDisplay();
        }

        function showMonthly() {
            calendarViewMonth = new Date(currentWeekStart.getFullYear(), currentWeekStart.getMonth(), 1);
            generateCalendar();
            document.getElementById('monthlyOverlay').style.display = 'flex';
        }

        function hideMonthly() {
            document.getElementById('monthlyOverlay').style.display = 'none';
        }

        function previousMonth() {
            calendarViewMonth.setMonth(calendarViewMonth.getMonth() - 1);
            
            // Don't go before August 2025
            const minDate = new Date(2025, 7, 1);
            if (calendarViewMonth < minDate) {
                calendarViewMonth = new Date(minDate);
            }
            
            generateCalendar();
        }

        function nextMonth() {
            calendarViewMonth.setMonth(calendarViewMonth.getMonth() + 1);
            
            // Don't go past December 2026
            const maxDate = new Date(2026, 11, 1);
            if (calendarViewMonth > maxDate) {
                calendarViewMonth = new Date(maxDate);
            }
            
            generateCalendar();
        }

        function goToDate(dateStr) {
            saveWeekData();
            
            const selectedDate = new Date(dateStr);
            
            // Find the Monday of the week containing this date
            const dayOfWeek = selectedDate.getDay(); // 0 = Sunday, 1 = Monday, etc.
            const mondayOffset = dayOfWeek === 0 ? -6 : 1 - dayOfWeek; // If Sunday, go back 6 days, otherwise go back to Monday
            
            const mondayOfWeek = new Date(selectedDate);
            mondayOfWeek.setDate(selectedDate.getDate() + mondayOffset);
            
            // Make sure we're within our date range
            const minDate = new Date(2025, 7, 4); // August 4, 2025
            const maxDate = new Date(2026, 11, 28); // December 28, 2026
            
            if (mondayOfWeek >= minDate && mondayOfWeek <= maxDate) {
                currentWeekStart = mondayOfWeek;
                hideMonthly();
                updateWeekDisplay();
            }
        }

        function generateCalendar() {
            const year = calendarViewMonth.getFullYear();
            const month = calendarViewMonth.getMonth();
            
            document.getElementById('calendarHeader').textContent = 
                calendarViewMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            
            // Update navigation button states
            const minDate = new Date(2025, 7, 1); // August 2025
            const maxDate = new Date(2026, 11, 1); // December 2026
            
            document.getElementById('prevMonthBtn').disabled = calendarViewMonth <= minDate;
            document.getElementById('nextMonthBtn').disabled = calendarViewMonth >= maxDate;
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            let calendarHTML = '';
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            dayHeaders.forEach(day => {
                calendarHTML += `<div class="calendar-day header">${day}</div>`;
            });
            
            // Empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                calendarHTML += '<div class="calendar-day"></div>';
            }
            
            // Days of the month
            const currentWeekEnd = new Date(currentWeekStart);
            currentWeekEnd.setDate(currentWeekEnd.getDate() + 6);
            
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                let cssClass = 'calendar-day clickable';
                
                if (date >= currentWeekStart && date <= currentWeekEnd) {
                    cssClass += ' current-week';
                }
                
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                calendarHTML += `<div class="${cssClass}" onclick="goToDate('${dateStr}')">${day}</div>`;
            }
            
            document.getElementById('calendarGrid').innerHTML = calendarHTML;
        }

        // Auto-save when typing
        document.addEventListener('input', function(e) {
            if (e.target.matches('.priority-input, .day-content')) {
                clearTimeout(window.saveTimeout);
                window.saveTimeout = setTimeout(saveWeekData, 1000);
            }
        });

        // Initialize
        function initializePlanner() {
            // Load saved data from browser storage
            try {
                const saved = localStorage.getItem('plannerData');
                if (saved) {
                    plannerData = JSON.parse(saved);
                }
            } catch(e) {
                console.log('Could not load saved data');
            }
            
            updateWeekDisplay();
        }

        // Initialize
        initializePlanner();
    </script>
</body>
</html>
